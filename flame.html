<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>FLAME Algorithm: AME Lab</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="simple-sidebar.css" rel="stylesheet">
  <!--Additional custom styling -->
  <link href="additional.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>

</head>

<body>

  <div class="d-flex" id="wrapper">

<!-- Sidebar -->
    <div class="bg-light border-right" id="sidebar-wrapper"><div id="sidebar-content">
	  <a href="index.html"><div class="sidebar-heading sidebar-heading-logo"><img class = "logo-alt2" src = "logos/logo_alt2.svg" alt = "duke logo"></div></a>
      <div class="list-group list-group-flush">
		<a href="about-us.html" class="list-group-item list-group-item-action bg-light">About Us</a>
        <a href="choosing-an-algorithm.html" class="list-group-item list-group-item-action bg-light">Choosing an Algorithm</a>
		<a id="flip" class="dropdown-btn list-group-item list-group-item-action bg-light" style="color:#495057">Getting Started<i class="fa fa-chevron-down" style="font-size:16px"></i></a>
        <div id="flipped" class="dropdown-container">
          <a href="dame.html" class="list-group-item list-group-item-action bg-light">DAME</a>
          <a href="flame.html" class="list-group-item list-group-item-action bg-light">FLAME</a>
          <a href="malts.html" class="list-group-item list-group-item-action bg-light">MALTS</a>
		  <a href="ahb.html" class="list-group-item list-group-item-action bg-light">AHB</a>
        </div>
        <a href="tutorials.html" class="list-group-item list-group-item-action bg-light">Tutorials</a>
        <a href="additional-resources.html" class="list-group-item list-group-item-action bg-light">Additional Resources</a>
      </div>
    </div></div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">

      <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
        <button class="navbar-toggler" id="menu-toggle" onclick="changeMenuText()"><span id="menuText"><span class="navbar-toggler-icon"></span></button>
        <ul class="navbar-nav ml-auto mt-lg-0">
          <a class="nav-link" href="https://github.com/almost-matching-exactly" target="_blank"><i class="fa fa-github"></i> Github</a>
        </ul>
      </nav>

      <div class="container-fluid" style="padding-bottom: 50px">
        <div style="margin-bottom:0px !important" class="banner"><h1 class="title mt-4">Getting Started with FLAME</h1></div>
			<div class="container">
		  	<h2 style="padding-bottom:0px !important;" class="languageHeader"><a id="rTab" class="languageTab languageActive" onclick="switchDisp('flameR','flamePython');switchTabs('rTab','pTab')">
			<span class="bigText">R Package</span><span class="smallText" style="display:none">R ...</span></a>
		    <a id="pTab" class="languageTab" onclick="switchDisp('flamePython','flameR');switchTabs('pTab','rTab')">
			<span class="bigText">Python Package</span><span class="smallText" style="display:none">Python ...</span></a></h2><hr class="languageHr">
			  <div id="flameR" class="container">
				<div class="container">
					Please note that this package requires the installation of R version 3.3 or higher. 
					If you do not already have an updated version of R installed on your computer, you can find instructions on how to download the latest version <a href="https://www.r-project.org/" target="_blank">here</a>.
					This package also contains Python dependencies which require installation of Python version 2.7 or higher. 
					If you do not already have an updated version of Python installed on your computer, you can download the latest version <a href="https://www.python.org/downloads/" target="_blank">here</a>.
					Also note that this package only includes the bit-vector implementation of FLAME, so it cannot be applied to database management systems.
					<!-- Additionally, for implementation with database systems, this package provides two approaches: SQLite and PostgreSQL. If your computer does not have PostgreSQL already installed, -->
					<!-- you can download it <a target="_blank" href="https://www.postgresql.org/download/">here</a>.  -->
					<!-- For connecting to a PostgreSQL server, please refer to this <a target="_blank" href="https://www.postgresqltutorial.com/connect-to-postgresql-database/">tutorial</a>. -->
				</div>
			    <h3 style="padding-top: 15px">Installation</h3>
				  <div class="container">
					<p>FLAME, along with its R dependencies, can be installed directly from CRAN via the following command:</p>
					<div class="code"><pre style="white-space:nowrap"><span id="codesampleR1">install.packages('FLAME')</span></pre>
					<button class="codeButton" onclick="codeCopy('codesampleR1');showToast();borderFix()"><i class="fa fa-clipboard" style="font-size:16px"></i></button></div>
					<div id="toast">Copied to clipboard!</div>
					<p>Alternatively, this package can be downloaded from <a target="_blank" href="https://github.com/vittorioorlandi/FLAME">the author's Github</a> using the following command:</p>
					<div class="code"><pre style="white-space:nowrap"><span id="codesampleR2">devtools::install_github('https://github.com/vittorioorlandi/FLAME')</span></pre><button class="codeButton" onclick="codeCopy('codesampleR2');showToast();borderFix()"><i class="fa fa-clipboard" style="font-size:16px"></i></button></div>
				  </div>
				<h3>Input Data Format</h3>
				  <div class="container">
				    To begin using the R-FLAME algorithm, first ensure that your dataset is stored as an <b>R Data Frame</b>. 
					Remember, all covariates should be catagorical and represented as <i>factor</i> R data types. If there are continuous covariates, they will 
					be automatically regrouped by the <span class="function">FLAME</span> algorithm. In addition to the covariate columns,
					your dataset should include a column of binary <i>factor</i> R data types which specify whether a unit is treated (1) or control (0) 
					and a column of <i>numeric</i> data types which specify unit outcomes. If no outcome column is provided,
					the algorithm will still match the data, but will not be able to estimate any treatment effects.
					Though are no requirements for covariate column names, the columns should be ordered as shown below. 
					Below is a sample dataset in the required format:
					<div class="input-data-container"> 
					  <div class="row" style="width:100%; margin-right:-15px">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;margin-top:15px;width:95%;margin-left:auto;margin-right:auto">
							<thead>
							  <tr style="text-align:center">
								<th>x_1 <span style="font-weight:normal;font-style:italic">(factor)</span></th>
								<th>x_2 <span style="font-weight:normal;font-style:italic">(factor)</span></th>
								<th>...</th>
								<th>x_m <span style="font-weight:normal;font-style:italic">(factor)</span></th>
								<th>treated <span style="font-weight:normal;font-style:italic">(factor)</span></th>
								<th>outcome <span style="font-weight:normal;font-style:italic">(numeric)</span></th>
							  </tr>
							</thead>
							<tbody>
							  <tr style="text-align:center">
								<td>3</td>
								<td>0</td>
								<td>...</td>
								<td>4</td>
								<td>1</td>
								<td>7.76</td>
							  </tr>
							  <tr style="text-align:center">
								<td>0</td>
								<td>2</td>
								<td>...</td>
								<td>1</td>
								<td>0</td>
								<td>5</td>
							  </tr style="text-align:center">
							  <tr style="text-align:center">
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
							  </tr>
							  <tr style="text-align:center">
								<td>0</td>
								<td>6</td>
								<td>...</td>
								<td>2</td>
								<td>1</td>
								<td>4.4</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					  </div>
				    </div>
				  </div>
				  <h3>Usage</h3>
				  <div class="container">
				    To generate sample data for exploring FLAMEs functionality, use the function <span class="function">gen_data</span> as shown below. 
					Remember to load the 'FLAME' package a shown in line 1 before calling any of the functions discussed in this section.
					This example generates a data frame with n = 250 units and p = 5 covariates:
<span id="codesampleR0" style="display:none">library('FLAME')

data <- gen_data(n = 250, p = 5)</span>
<div class="code" style="margin-top:15px"><pre><span class="import">library</span>(<span class="Rstring">'FLAME'</span>)

data <- <b>gen_data</b>(n = <span class="Rnumber">250</span>, p = <span class="Rnumber">5</span>)</pre>
					<button class="codeButton" onclick="codeCopy('codesampleR0');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					Note that you can also write the generated dataset to a file by adjusting parameters detailed in the next section.
					<br><br>
					To run the algorithm, use the <span class="function">FLAME</span> function as shown in line 3. The required data parameter can either be
					a path to a .csv file or a dataframe. In this example, a .csv file path is used:
<span id="codesampleR3" style="display:none">library('FLAME')

FLAME_out <- FLAME(data = "data.csv", treated_column_name="treated", outcome_column_name="outcome")
print(FLAME_out$data)</span>
<div class="code" style="margin-top:15px"><pre><span class="import">library</span>(<span class="Rstring">'FLAME'</span>)

FLAME_out <- FLAME(data = <span class="Rstring">"data.csv"</span>, treated_column_name=<span class="Rstring">"treated"</span>, outcome_column_name=<span class="Rstring">"outcome"</span>)
print(FLAME_out$data)</pre>
					<button class="codeButton" onclick="codeCopy('codesampleR3');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					The object <span style="font-weight:600">FLAME_out</span> is a list of six entries:<br>
					<div class="row">
						<div class="col">
						  <table class="table" style="margin-bottom:15px;margin-top:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
								<tr>
									<td><span style="font-weight:600">FLAME_out$data:</span></td>
									<td>a data frame containing the original data with an extra logical column denoting whether a 
										unit was matched and an extra numeric column denoting how many times a unit was matched. The covariates that each unit was not matched on are denoted with asterisks.</td>
								</tr><tr>
									<td><span style="font-weight:600">FLAME_out$MGs:</span></td>
									<td>a list of every matched group formed by the algorithm.</td>
								</tr><tr>
									<td><span style="font-weight:600">FLAME_out$CATE:</span></td>
									<td>a vector containing the conditional average treatment effect (CATE) for every matched group formed.</td>
								</tr><tr>
									<td><span style="font-weight:600">FLAME_out$matched_on:</span></td>
									<td>a list corresponding to MGs that gives the covariates, and their values, on which units in each matched group were matched.</td>
								</tr><tr>
									<td><span style="font-weight:600">FLAME_out$matching_covs:</span></td>
									<td>a list containing the covariates that were used for matched on each iteration of the algorithm.</td>
								</tr><tr>
									<td><span style="font-weight:600">FLAME_out$dropped:</span></td>
									<td>a vector of the covariate dropped at each iteration.</td>
								</tr>
							</tbody>
						  </table>
						</div>
					</div>
					To find the matched groups of particular units after running <span class="function">FLAME</span>, use the function <span class="function">MG</span> as shown below. 
					In this example, the function would return the matched groups of units 1 and 2:
<span id="codesampleR4" style="display:none">MG(c(1,2),FLAME_out)</span>
<div class="code" style="margin-top:15px"><pre><b>MG</b>(c(<span class="Rnumber">1</span>,<span class="Rnumber">2</span>), FLAME_out)</pre>
					<button class="codeButton" onclick="codeCopy('codesampleR4');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					To find the CATEs of particular units, use the function <span class="function">CATE</span> as shown below. 
					In this example, the function would return the matched groups of units 1 and 2:
<span id="codesampleR5" style="display:none">CATE(c(1,2),FLAME_out)</span>
<div class="code" style="margin-top:15px"><pre><b>CATE</b>(c(<span class="Rnumber">1</span>,<span class="Rnumber">2</span>), FLAME_out)</pre>
					<button class="codeButton" onclick="codeCopy('codesampleR5');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					To find the average treatment effect (ATE) or average treatment effect on the treated (ATT), use the functions <span class="function">ATE</span> 
					and <span class="function">ATT</span>, respectively, as shown below:
<span id="codesampleR6" style="display:none">ATE(FLAME_out = FLAME_out)
ATT(FLAME_out = FLAME_out)</span>
<div class="code" style="margin-top:15px"><pre><b>ATE</b>(FLAME_out = FLAME_out)
<b>ATT</b>(FLAME_out = FLAME_out)</pre>
					<button class="codeButton" onclick="codeCopy('codesampleR6');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
			  </div>
			<h3>FLAME - Parameters and Defaults</h3>
				  <div class="container">
<div class="pre-nonumbers" style="margin-top:15px"><b>FLAME</b>(data, holdout = <span class="Rnumber">0.1</span>, C = <span class="Rnumber">0.1</span>, treated_column_name = <span class="Rstring">&quot;treated&quot;</span>,
     outcome_column_name = <span class="Rstring">&quot;outcome&quot;</span>, binning_method = <span class="Rstring">&quot;sturges&quot;</span>, PE_method = <span class="Rstring">&quot;ridge&quot;</span>,
     user_PE_fit = <span class="import">NULL</span>, user_PE_fit_params = <span class="import">NULL</span>, user_PE_predict = <span class="import">NULL</span>,
     user_PE_predict_params = <span class="import">NULL</span>, replace = <span class="import">FALSE</span>, verbose = <span class="Rnumber">2</span>, return_pe = <span class="import">FALSE</span>,
     return_bf = <span class="import">FALSE</span>, early_stop_iterations = <span class="import">Inf</span>, early_stop_epsilon = <span class="Rnumber">0.25</span>,
     early_stop_control = <span class="Rnumber">0</span>, early_stop_treated = <span class="Rnumber">0</span>, early_stop_pe = <span class="import">Inf</span>, 
     early_stop_bf = <span class="Rnumber">0</span>, missing_data = <span class="Rnumber">0</span>, missing_holdout = <span class="Rnumber">0</span>, 
     missing_data_imputations = <span class="Rnumber">5</span>, missing_holdout_imputations = <span class="Rnumber">5</span>, 
     impute_with_treatment = <span class="import">TRUE</span>, impute_with_outcome = <span class="import">FALSE</span>)</div>
					<a onclick="expandAll(['RflameKey','RflameEarly','RflameMissing','RflameAdditional']);minusAll(['RplusKey','RplusEarly','RplusMissing','RplusAdditional'])" class="expand-all">Expand all</a>
					<a onclick="collapseAll(['RflameKey','RflameEarly','RflameMissing','RflameAdditional']);plusAll(['RplusKey','RplusEarly','RplusMissing','RplusAdditional'])" 
					class="expand-all">Collapse all</a>
					<div class="parameter-container">
					<h4 style="margin-top: 15px">Key Parameters<i id="RplusKey" onclick="expand('RflameKey');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="RflameKey">
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-top:15px;margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>data:</b><br>file, Dataframe, required</td>
								<td>The data to be matched.</td>
							  </tr><tr>
							    <td><b>holdout:</b><br>numeric, file, Dataframe, optional (default = 0.1)</td>
								<td>Holdout data used to compute predictive error. If a numeric scalar between 0 and 1 is provided,
								that proportion of <b>data</b> will be used. 
								Otherwise, if a file path or dataframe is provided, that dataset will serve as the holdout data.</td>
							  </tr><tr>
							    <td><b>C</b><br>numeric, optional (default = 0.1)</td>
								<td>Tradeoff parameter between predictive error and balancing factor.
								A greater value prioritizes more matches while a lower value prioritizes not dropping important covariates.
								Must be positive scalar.</td>
							  </tr><tr>
							    <td><b>treated_<wbr>column_<wbr>name:</b><br>string, optional (default = 'treated')</b></td>
								<td>The name of the column which specifies whether a unit is treated or control.</td>
							  </tr><tr>
								<td><b>outcome_<wbr>column_<wbr>name:</b><br>string, optional (default = 'outcome')</td>
								<td>The name of the column which specifies each unit outcome.</td>
							  </tr><tr>
								<td><b>binning_<wbr>method:</b><br>string, optional (default = 'sturges')</td>
								<td>The method used to determine number of bins for regrouping continuous covariates.<br>
								If 'sturges', use Sturge's rule.<br>
								If 'scott', use Scott's rule.<br>
								If 'fd', use the Freedman-Diaconis rule.</td>
						      </tr><tr>
								<td><b>PE_<wbr>method:</b><br>string, optional (default = 'ridge')</td>
								<td>The method used to cross-validate before the default predict method is used to estimate outcomes.<br>
								If 'ridge', perform cross-validation using <a target="_blank" href="https://www.rdocumentation.org/packages/glmnet/versions/4.0/topics/cv.glmnet">glmnet::cv.glmnet</a> with default parameters.<br>
								If 'xgb', perform cross-validation using <a target="_blank" href="https://www.rdocumentation.org/packages/xgboost/versions/1.0.0.2/topics/xgb.cv">xgboost::xgb.cv</a> with a wide range of parameter values
								and determines best values with respect to root-mean-square error (RMSE) for continuous outcomes or binary missclassification rate for binary outcomes.</td>
							  </tr><tr>
								<td><b>user_<wbr>PE_<wbr>fit:</b><br>function, optional (default = NULL): </td>
								<td>Optional function to be used instead of those provided for in <b>PE_method</b> to fit unit outcomes from the covariates. 
								Must take in a matrix of covariates as its first argument and a vector of outcomes as its second argument.</td>
							  </tr><tr>
								<td><b>user_<wbr>PE_<wbr>fit_<wbr>params:</b><br>list, optional (default = NULL) </td>
								<td>A named list of optional parameters to be used by <b>user_<wbr>PE_<wbr>fit</b></td>
							  </tr><tr>
								<td><b>user_<wbr>PE_<wbr>predict:</b><br>function, optional (default = NULL) </td>
								<td>Optional function to be used instead of the default predict method for generating predictions from the
								output of <b>user_<wbr>PE_<wbr>fit</b>. Must take in an object of the type returned by <b>user_<wbr>PE_<wbr>fit</b>
								as its first argument and a matrix of values for which to generate predictions as its second argument.</td>
							  </tr><tr>
								<td><b>user_<wbr>PE_<wbr>predict_<wbr>params:</b><br>list, optional (default = NULL) </td>
								<td>A named list of optional parameters to be used by <b>user_<wbr>PE_<wbr>predict</b></td>
							  </tr><tr>
								<td><b>replace:</b><br>logical scalar, optional (default = FALSE): </td>
								<td>Specifies whether the same unit can be matched multiple times on different sets of covariates.
								If True, balancing factor is computed by dividing by the total number of treatment/control units
								instead of the the number of unmatched treatment/control units.</td>
							  </tr><tr>
								<td><b>verbose:</b><br>integer, optional (default = 2): </td>
								<td>Controls how progress is displayed while the algorithm is running.<br>
								If 0, prints nothing.<br>
								If 1, prints stopping condition.<br>
								If 2, prints the iteration number, the number of units left to match on every 5th iteration, and the stopping condition.</td>
							  </tr><tr>
								<td><b>return_<wbr>pe:</b><br>logical scalar, optional (default = FALSE): </td>
								<td>If True, the predictive error at each iteration will be returned.</td>
							  </tr><tr>
								<td><b>return_<wbr>bf:</b><br>logical scalar, optional (default = FALSE): </td>
								<td>If True, the balancing factor at each iteration will be returned.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
						</div>
					</div>
					<h4 style="margin-top:15px">Early Stopping Parameters<i id="RplusEarly" onclick="expand('RflameEarly');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="RflameEarly">
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>early_<wbr>stop_<wbr>iterations:</b><br>integer, optional (default = Inf): </td>
								<td>Specifies the number of iterations after which to hard-stop the algorithm. If 0,
								one round of exact matching is performed before stopping.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>epsilon:</b><br>numeric, optional (default = 0.25)</td>
								<td>Nonnegative numeric denoting the maximum acceptable percent change in predictive error before the algorithm will stop iterating. Default corresponds to 25%.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>control:</b><br>numeric, optional (default = 0)</td>
								<td>Minimum acceptable proportion of unmatched control units after which the algorithm will stop iterating. Must be between 0 and 1.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>treated:</b><br>numeric, optional (default = 0)</td>
								<td>Minimum acceptable proportion of unmatched treatment units after which the algorithm will stop iterating. Must be between 0 and 1.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>pe:</b><br>numeric, optional (default = Inf)</td>
								<td>Maximum acceptable predictive error. 
								If FLAME attempts to drop a covariate which would increase PE above this threshold, it will stop iterating.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>bf:</b><br>numeric, optional (default = 0)</td>
								<td>Minimum acceptable balancing factor. 
								If FLAME attempts to drop a covariate which would decrease BF below this threshold, it will stop iterating.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					<h4 style="margin-top:15px">Missing Data Parameters<i id="RplusMissing" onclick="expand('RflameMissing');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="RflameMissing"></h4>
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>missing_<wbr>data:</b><br>integer, optional (default = 0) </td>
								<td>If 0, assume no missingness in matching data.<br>
								If 1, drop units with missingness from matching data.<br>
								If 2, impute missing values using <a target="_blank" href="https://www.rdocumentation.org/packages/mice/versions/1.14/topics/mice">mice::mice</a> 
								on matching dataset for the number of imputations specified by <b>missing_<wbr>data_<wbr>imputations</b>.<br>
								If 3, do not match units on covariates that are missing.</td>
							  </tr><tr>
								<td><b>missing_<wbr>holdout:</b><br>integer, optional (default = 0): </td>
								<td>If 0, assume no missingness in holdout data.<br>
								If 1, drop units with missingness from holdout data.<br>
								If 2, impute missing values <a target="_blank" href="https://www.rdocumentation.org/packages/mice/versions/1.14/topics/mice">mice::mice</a> 
								on holdout dataset for the number of imputations specified by <b>missing_<wbr>holdout_<wbr>imputations</b>.</td>
							  </tr><tr>
								<td><b>missing_<wbr>data_<wbr>imputations:</b><br>integer, optional (default = 5) </td>
								<td>If <b>missing_<wbr>data</b>=2, specifies the number of imputations on the matching set.</td>
							  </tr><tr>
								<td><b>missing_<wbr>holdout_<wbr>imputations:</b><br>integer, optional (default = 5) </td>
								<td>If <b>missing_<wbr>holdout</b>=2, specifies the number of imputations on the holdout set.</td>
							  </tr><tr>
								<td><b>impute_<wbr>with_<wbr>treatment:</b><br>logical scalar, optional (default = TRUE) </td>
								<td>If True, treatment assignment is used to impute covariates when <b>missing_data</b>=2 or <b>missing_<wbr>holdout</b>=2</td>
							  </tr><tr>
								<td><b>impute_<wbr>with_<wbr>outcome:</b><br>logical scalar, optional (default = FALSE) </td>
								<td>If True, outcome information is used to impute covariates when <b>missing_data</b>=2 or <b>missing_<wbr>holdout</b>=2</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					</div>
					<h3 style="margin-top:25px">Additional Functions - Parameters and Defaults</h3>
<div class="pre-nonumbers" style="margin-top:15px"><span class="comment">#generates toy data</span>
<b>gen_data</b>(n = <span class="Rnumber">250</span>, p = <span class="Rnumber">5</span>, write = <span class="import">FALSE</span>, path = getwd(), filename = <span class="Rstring">&quot;FLAME.csv&quot;</span>)

<span class="comment">#returns matched groups for specified units</span>
<b>MG</b>(units, FLAME_out, multiple = <span class="import">FALSE</span>, index_only = <span class="import">FALSE</span>)

<span class="comment">#returns CATEs for specified units</span>
<b>CATE</b>(units, FLAME_out, multiple = <span class="import">FALSE</span>)

<span class="comment">#returns ATE for matched dataset</span>
<b>ATE</b>(FLAME_out)

<span class="comment">#returns ATT for matched dataset</span>
<b>ATT</b>(FLAME_out)
</div>
				    <div class="parameter-container">
					<h4>Key Parameters<i id="RplusAdditional" onclick="expand('RflameAdditional');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="RflameAdditional"></h4>
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>n:</b><br>integer, optional (default = 250)</td>
								<td>Number units desired in the dataset created by gen_data.</td>
							  </tr><tr>
								<td class="pwidth"><b>p:</b><br>integer, optional (default = 5)</td>
								<td>Number units desired in the dataset created by gen_data. Must be greater than 2.</td>
							  </tr><tr>
								<td class="pwidth"><b>write:</b><br>logical scalar, optional (default = FALSE)</td>
								<td>Specifies whether the output of gen_data is stored as a .csv file according to the parameters <b>path</b> and <b>filename</b>.</td>
							  </tr><tr>
								<td class="pwidth"><b>path:</b><br>string, optional (default = getwd( ))</td>
								<td>If <b>write</b> is True, specifies the location path of the file created by gen_data.</td>
							  </tr><tr>
								<td class="pwidth"><b>filename:</b><br>string, optional (default = 'FLAME.csv')</td>
								<td>If <b>write</b> is True, specifies the name of the file created by gen_data.</td>
							  </tr><tr>
								<td class="pwidth"><b>units:</b><br>numeric vector, required</td>
								<td>Vector of indices for the units of interest for the functions MG and CATE.</td>
							  </tr><tr>
								<td class="pwidth"><b>FLAME_<wbr>out:</b><br>Dataframe, required</td>
								<td>The output of a call to FLAME.</td>
							  </tr><tr>
								<td class="pwidth"><b>multiple:</b><br>logical scalar, optional (default = FALSE)</td>
								<td>If False (default), then the functions MG and CATE will only return objects pertaining to a unit's main matched group.<br>
								If True, the aforementioned functions will return objects pertaining to every matched group containing a specified unit (only relevant if <b>replace</b>=True). </td>
							  </tr><tr>
								<td class="pwidth"><b>index_<wbr>only:</b><br>logical scalar, optional (default = FALSE)</td>
								<td>If True, the function MG will return only the indices of the units in each matched group.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					</div>
				</div>
				</div>
			  <div id="flamePython" style="display:none" class="container">
				  <div class="container">
					Please note that this package requires the installation of Python version 3 or higher. 
					If you do not already have an updated version of Python installed on your computer, you can download the latest version <a href="https://www.python.org/downloads/" target="_blank">here</a>.
					Additionally, this package is dependent on Pandas, Scikit-learn, and Numpy. If your version of Python does not have these packages, you can install them <a href="https://packaging.python.org/tutorials/installing-packages/" target="_blank">here</a>.
					We recommend installing the <a href="https://www.anaconda.com/products/individual" target="_blank">Anaconda package</a>, which comes with the Python libraries our software is dependent on already pre-installed.
					Also note that this package only includes the bit-vector implementation of FLAME, so it cannot be applied to database management systems.
				  </div>
			    <h3 style="padding-top: 15px">Installation</h3>
				  <div class="container">
					<p>FLAME is currently available in Python for download on the <a href="https://github.com/almost-matching-exactly" target="_blank">almost-matching-exactly Github</a> or for installation via PyPi (recommended). The package includes both the DAME and FLAME algorithms and can be installed with the following command:<p>
					<div class="code"><pre style="white-space:nowrap"><span id="codesample1">pip install dame-flame</span></pre><button class="codeButton" onclick="codeCopy('codesample1');showToast();borderFix()"><i class="fa fa-clipboard" style="font-size:16px"></i></button></div>
				  </div>
				<h3>Input Data Format</h3>
				  <div class="container">
				    To begin using the Python implementation of the FLAME algorithm, first ensure that your dataset meets the necessary requirements. 
					The data can be stored as a CSV/Excel file or as a <b>Python Pandas Data Frame</b>. 
					Remember, all covariates should be catagorical and expressed as <i>integer</i> data types. If there are continuous covariates, please consider regrouping. In addition to the covariate columns,
					your dataset should include a column of binary <i>integer</i> data types which specify whether a unit is treated (1) or control (0) 
					and a column of <i>integer</i> or <i>float</i> data types which specify unit outcomes. There are no requirements for covariate column names or the ordering of the columns. 
					Below is a sample dataset in the required format:
					<div class="input-data-container">
					  <div class="row" style="width:100%; margin-right:-15px">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;margin-top:15px;width:95%;margin-left:auto;margin-right:auto">
							<thead>
							  <tr style="text-align:center">
								<th>x_1 <span style="font-weight:normal;font-style:italic">(integer)</span></th>
								<th>x_2 <span style="font-weight:normal;font-style:italic">(integer)</span></th>
								<th>...</th>
								<th>x_m <span style="font-weight:normal;font-style:italic">(integer)</span></th>
								<th>treated <span style="font-weight:normal;font-style:italic">(integer)</span></th>
								<th>outcome <span style="font-weight:normal;font-style:italic">(numeric)</span></th>
							  </tr>
							</thead>
							<tbody>
							  <tr style="text-align:center">
								<td>1</td>
								<td>2</td>
								<td>...</td>
								<td>4</td>
								<td>1</td>
								<td>4.5</td>
							  </tr>
							  <tr style="text-align:center">
								<td>2</td>
								<td>3</td>
								<td>...</td>
								<td>7</td>
								<td>0</td>
								<td>3.33</td>
							  </tr>
							  <tr style="text-align:center">
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
							  </tr>
							  <tr style="text-align:center">
								<td>2</td>
								<td>6</td>
								<td>...</td>
								<td>1</td>
								<td>1</td>
								<td>6</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					  </div>
					</div>					
				  </div>
				<h3>Usage</h3>
				  <div class="container">
				    To run the algorithm, use the <span class="function">FLAME</span> function as shown in line 5. Although the <span class="function">FLAME</span> function can
					operate on a file or a dataframe, the additional functions included in the package require the latter format. As such, it is recommended to
					first convert your data to a Python Pandas Data Data frame as shown in line 4:
<span id="codesample2" style="display:none">import pandas as pd
import dame_flame

df = pd.read_csv("data.csv")
result = dame_flame.DAME_FLAME.FLAME(input_data=df, treatment_column_name="treated", outcome_column_name="outcome")
print(result[0])</span>
<div class="code" style="margin-top:15px"><pre><span class="import">import</span> pandas <span class="import">as</span> pd
<span class="import">import</span> dame_flame

df = pd.read_csv(<span class="string">&quot;data.csv&quot;</span>)
result = dame_flame.DAME_FLAME.<b>FLAME</b>(input_data=df, treatment_column_name=<span class="string">&quot;treated&quot;</span>, outcome_column_name=<span class="string">&quot;outcome&quot;</span>)
<span class="print">print</span>(result[<span class="number">0</span>])</pre>
					<button class="codeButton" onclick="codeCopy('codesample2');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					The object <span style="font-weight:600">result</span> is by default a list of one entry, the first and only element of which is a dataframe containing all of the units that were matched and the covariates that they were matched on. 
					The covariates that each unit was not matched on are denoted with asterisks. The output of the algorithm may contain additional values based on optional parameters which are detailed in the next section.
					<br><br>
					To find the main matched group of a particular unit after running <span class="function">FLAME</span>, use the function <span class="function">mmg_of_unit</span> as shown below:
<span id="codesample3" style="display:none">mmg = dame_flame.DAME_FLAME.mmg_of_unit(return_df=result[0], unit_id=0, input_data=df)
print(mmg)</span>
<div class="code" style="margin-top:15px"><pre>mmg = dame_flame.DAME_FLAME.<b>mmg_of_unit</b>(return_df=result[<span class="number">0</span>], unit_id=<span class="number">0</span>, input_data=df)
<span class="print">print</span>(mmg)</pre>
					<button class="codeButton" onclick="codeCopy('codesample3');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
					To find the estimated treatment effect on a particular unit, use the function <span class="function">te_of_unit</span> as shown below:
<span id="codesample4" style="display:none">te = dame_flame.DAME_FLAME.te_of_unit(return_df=result[0], unit_id=0, input_data=df, treatment_column_name="treated", outcome_column_name="outcome")
print(te)</span>
<div class="code" style="margin-top:15px"><pre>te = dame_flame.DAME_FLAME.<b>te_of_unit</b>(return_df=result[<span class="number">0</span>], unit_id=<span class="number">0</span>, input_data=df, treatment_column_name=<span class="string">&quot;treated&quot;</span>, outcome_column_name=<span class="string">&quot;outcome&quot;</span>)
<span class="print">print</span>(te)</pre>
					<button class="codeButton" onclick="codeCopy('codesample4');showToast();borderFix()"><i class="fa fa-clipboard"></i></button></div>
				  </div>
				<h3 id="params">FLAME - Parameters and Defaults</h3>
				  <div class="container">
<div class="pre-nonumbers" style="margin-top:15px"><b>FLAME</b>(input_data, treatment_column_name=<span class="string">&quot;treated&quot;</span>, weight_array=<span class="print">False</span>,
     outcome_column_name=<span class="string">&quot;outcome&quot;</span>, adaptive_weights=<span class="string">&quot;ridge&quot;</span>, alpha=<span class="number">0.1</span>, 
     holdout_data=<span class="print">False</span>, repeats=<span class="print">True</span>, verbose=<span class="number">2</span>, want_pe=<span class="print">False</span>, want_bf=<span class="print">False</span>, 
     early_stop_iterations=<span class="print">False</span>, stop_unmatched_c=<span class="print">False</span>, 
     stop_unmatched_t=<span class="print">False</span>, early_stop_un_c_frac=<span class="number">0.1</span>, 
     early_stop_un_t_frac=<span class="number">0.1</span>, early_stop_pe=<span class="print">False</span>, 
     early_stop_bf=<span class="print">False</span>, early_stop_pe_frac=<span class="number">0.01</span>, 
     early_stop_bf_frac=<span class="number">0.01</span>, missing_indicator=numpy.nan, 
     missing_holdout_replace=<span class="number">0</span>, missing_data_replace=<span class="number">0</span>, 
     missing_holdout_imputations=<span class="number">10</span>, missing_data_imputations=<span class="number">0</span>)
     pre_dame=<span class="print">False</span>, C=<span class="number">0.1</span>, epsilon=<span class="number">0.25</span></div>
					<a onclick="expandAll(['flameKey','flameEarly','flameMissing','flameAdditional']);minusAll(['plusKey','plusEarly','plusMissing','plusAdditional'])" class="expand-all">Expand all</a>
					<a onclick="collapseAll(['flameKey','flameEarly','flameMissing','flameAdditional']);plusAll(['plusKey','plusEarly','plusMissing','plusAdditional'])" 
					class="expand-all">Collapse all</a>
					<div class="parameter-container">
					<h4 style="margin-top: 15px">Key Parameters<i id="plusKey" onclick="expand('flameKey');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="flameKey">
					<span style="color:#6c757d">* denotes FLAME-specific parameters</span>
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-top:15px;margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>input_data:</b><br>file, Dataframe, required</td>
								<td>The data to be matched.</td>
							  </tr><tr>
							    <td><b>treatment_<wbr>column_<wbr>name:</b><br>string, optional (default = 'treated')</td>
								<td>The name of the column which specifies whether a unit is treated or control.</td>
							  </tr><tr>
							    <td><b>outcome_<wbr>column_<wbr>name:</b><br>string, optional (default = 'outcome')</td>
								<td>The name of the column which specifies each unit outcome.</td>
							  </tr><tr>
							    <td><b>adaptive_<wbr>weights:</b><br>string, optional (default = 'ridge')</b></td>
								<td>The weight dropping method to be used.<br>If False, implements no weight dropping method.
								<br>If 'ridge', implement ridge regression.<br>If 'ridgeCV', implement ridge regression with cross-validation.
								<br>If 'decision tree', implement decision tree regression.</td>
							  </tr><tr>
								<td><b>alpha:</b><br>float, optional (default = 0.1)</td>
								<td>This is the alpha for ridge regression. We use the scikit package for ridge regression, so it is "regularization 
								strength". Larger values specify stronger regularization. Must be positive float.</td>
							  </tr><tr>
								<td><b>holdout_data:</b><br>file, Dataframe, optional (default = False)</td>
								<td>The data used in the holdout training set. Only required if doing an adaptive_weights version.
								If False, 10% of the input data will be randomly selected for the training set.</td>
						      </tr><tr>
								<td><b>repeats:</b><br>bool, optional (default = True)</td>
								<td>Specifies whether values for which a main matched group has been found can
									be used again and placed in an auxiliary matched group.</td>
							  </tr><tr>
								<td><b>verbose:</b><br>integer, optional (default = 2): </td>
								<td>Controls how progress is displayed while the algorithm is running.<br>
								If 0, prints nothing.<br>If 1, prints iteration number. <br>If 2, prints the
									iteration number and number of units left to match on every 10th 
									iteration.<br>If 3, prints iteration number and number of units left to match on every iteration.</td>
							  </tr><tr>
								<td><b>want_pe:</b><br>bool, optional (default = False) </td>
								<td>Specifies whether the output will include the 
									predictive error of the covariate sets matched on in each iteration.</td>
							  </tr><tr>
								<td><b>want_bf:</b><br>bool, optional (default = False) </td>
								<td>Specifies whether the output will include the balancing factor of each 
									iteration.</td>
							  </tr><tr>
								<td><b>*pre_dame:</b><br>integer, optional (default = False) </td>
								<td>Allows the user to run the Hybrid FLAME-DAME algorithm. 
								If provided, the integer value specifies the number of interations after which the algorithm will switch from FLAME to DAME.</td>
							  </tr><tr>
								<td><b>*C:</b><br>float, optional (default = 0.1): </td>
								<td>Tradeoff parameter between predictive error and balancing factor.
								A greater value prioritizes more matches while a lower value prioritizes not dropping important covariates.
								Must be positive scalar.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
						</div>
					</div>
					<h4 style="margin-top:15px">Early Stopping Parameters<i id="plusEarly" onclick="expand('flameEarly');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="flameEarly">
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>early_<wbr>stop_<wbr>iterations:</b><br>integer, optional (default = False): </td>
								<td>If provided, specifies the number of iterations after which to hard-stop the algorithm.</td>
							  </tr><tr>
								<td><b>stop_<wbr>unmatched_c:</b><br>bools, optional (default = False)</td>
								<td>Specifies whether the algorithm stops when there are no control units remaining to match.</td>
							  </tr><tr>
								<td><b>stop_<wbr>unmatched_t:</b><br>bools, optional (default = False)</td>
								<td>Specifies whether the algorithm stops when there are no treatment units remaining to match.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>un_<wbr>c_frac:</b><br>float, optional (default = 0.1)</td>
								<td>Minimum acceptable proportion of unmatched control units after which the algorithm will stop iterating. Must be between 0 and 1.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>un<wbr>_t_frac:</b><br>float, optional (default = 0.1)</td>
								<td>Minimum acceptable proportion of unmatched treatment units after which the algorithm will stop iterating. Must be between 0 and 1.</td>
							  </tr><tr>
								<td><b>early_stop_pe:</b><br>bool, optional (default = False)</td>
								<td>If True, then the algorithm will hard-stop once the covariate set chosen for matching has a predictive error greater 
								than the threshold provided in <b>early_stop_pe_frac</b></td>
							  </tr><tr>
								<td><b>early_stop_bf:</b><br>bool, optional (default = False)</td>
								<td>If True, then the algorithm will hard-stop once the covariate set chosen for matching has a balancing factor lower 
								than the threshold provided in <b>early_stop_bf_frac</b></td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>pe_frac:</b><br>float, optional (default = 0.01)</td>
								<td>If <b>early_stop_pe</b> is True, then the algorithm will hard-stop once the covariate set chosen to match on has a predictive error greater than this value.</td>
							  </tr><tr>
								<td><b>early_<wbr>stop_<wbr>bf_frac:</b><br>float, optional (default = 0.01)</td>
								<td>If <b>early_stop_bf</b> is True, then the algorithm will hard-stop once the covariate set chosen to match on has a balancing factor lower than this value.</td>
							  </tr><tr>
								<td><b>*epsilon:</b><br>float, optional (default = 0.25)</td>
								<td>Nonnegative float denoting the maximum acceptable percent change in predictive error before the algorithm will stop iterating. Default corresponds to 25%.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					<h4 style="margin-top:15px">Missing Data Parameters<i id="plusMissing" onclick="expand('flameMissing');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="flameMissing"></h4>
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>missing_indicator:</b><br>string, integer, np.nan, optional (default = np.nan) </td>
								<td>This is the indicator for missing data in the dataset. 
								For example, if missing values are denoted with "NA", set this paramater equal to "NA".  </td>
							  </tr><tr>
								<td><b>missing_<wbr>holdout_<wbr>replace:</b><br>integer, optional (default = 0): </td>
								<td>
									If 0, assume no missingness in holdout data.<br>
									If 1, drop all units with missingness from holdout dataset.<br>
									If 2, impute missing values using <a target="_blank" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3074241/">MICE</a> 
									on holdout dataset for the number of imputations specified by <b>missing_<wbr>holdout_<wbr>imputations</b></td>
							  </tr><tr>
								<td><b>missing_<wbr>data_<wbr>replace:</b><br>integer, optional (default = 0): </td>
								<td>
									If 0, assume no missingness in matching data.<br>
									If 1, drop all units with missingness from matching dataset.<br>
									If 2, do not match units on covariates that are missing.<br>
									If 3, impute missing values using <a target="_blank" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3074241/">MICE</a> 
									on matching dataset for the number of imputations specified by <b>missing_<wbr>data_<wbr>imputations</b>.</td>
							  </tr><tr>
								<td><b>missing_<wbr>holdout_<wbr>imputations:</b><br>integer, optional (default = 10) </td>
								<td>If <b>missing_<wbr>holdout_<wbr>replace</b>=2, specifies the number of imputations on the holdout set.</td>
							  </tr><tr>
								<td><b>missing_<wbr>data_<wbr>imputations:</b><br>integer, optional (default = 1) </td>
								<td>If <b>missing_<wbr>data_<wbr>replace</b>=3, specifies the number of imputations on the matching set.</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					</div>
			  </div>
			  <h3 style="margin-top:25px">Additional Functions - Parameters and Defaults</h3>
				  <div class="container">
<div class="pre-nonumbers" style="margin-top:15px"><span class="comment">#returns main matched group of specified unit</span>
<b>mmg_of_unit</b>(return_df, unit_id, input_data, output_style=<span class="number">1</span>)

<span class="comment">#returns treatment effect on specified unit</span>
<b>te_of_unit</b>(return_df, unit_id, input_data, treatment_column_name, outcome_column_name)

<span class="comment">#returns main matched group and treatment effect for specified unit and includes fancy version of above functions</span>
<b>mmg_and_te_of_unit</b>(return_df, unit_id, input_data, treatment_column_name, 
outcome_column_name, return_vals=<span class="number">1</span>)</div>
				    <div class="parameter-container">
					<h4>Key Parameters<i id="plusAdditional" onclick="expand('flameAdditional');minus(this.id)" class="fa fa-minus-square-o"></i></h4>
					<div id="flameAdditional"></h4>
					<div class="row">
						<div class="col">
						  <table class="table table-striped" style="margin-bottom:15px;width:95%;margin-left:auto;margin-right:auto">
							<tbody>
							  <tr>
								<td class="pwidth"><b>return_df:</b><br>Dataframe, required</td>
								<td>The dataframe containing all of the matches, obtained from the first element in the output of the algorithm.</td>
							  </tr><tr>
								<td class="pwidth"><b>unit_id:</b><br>integer, required</td>
								<td>The index identification for the unit of interest.</td>
							  </tr><tr>
								<td class="pwidth"><b>input_data:</b><br>Dataframe, required</td>
								<td>Dataframe containing the original dataset which has already been matched using FLAME.</td>
							  </tr><tr>
								<td class="pwidth"><b>treatment_<wbr>column_<wbr>name:</b><br>string, required</td>
								<td>The name of the column in <b>input_data</b> which specifies whether a unit is treated or control.</td>
							  </tr><tr>
								<td class="pwidth"><b>outcome_<wbr>column_<wbr>name:</b><br>string, required</td>
								<td>The name of the column in <b>input_data</b> which specifies each unit outcome.</td>
							  </tr><tr>
								<td class="pwidth"><b>output_style:</b><br>integer, optional (default = 1)</td>
								<td>If 1, include only the covariates matched on in the output.<br>
								If 2, include all attributes in the output.</td>
							  </tr><tr>
								<td class="pwidth"><b>return_vals:</b><br>integer, optional (default = 1)</td>
								<td>If 0, print the main matched group and treatment effect for the specified unit (fancy version).<br>
								Else, return the main matched group and treatment effect for the specified unit with no print statement (default version).</td>
							  </tr>
							</tbody>
						  </table>
						</div>
					</div>
					</div>
					</div>
				</div>
			  </div>
			  </div>
	  </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Menu Toggle Script -->
  <script>
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");
    });
  </script>
  <!-- Additional Custom Script -->
  <script src="additionaljs.js"></script>
</body>

</html>
